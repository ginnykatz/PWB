<!DOCTYPE html>
<html lang="en">
<head>
	<title>Pure Water Brew</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!--add required stylesheets-->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
	<!--leaflet css-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
	<!-- Mapbox GL -->
	<link href="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.css" rel='stylesheet'/>
	<!--animation-->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
	<link rel="stylesheet" href="https://necolas.github.io/normalize.css/8.0.0/normalize.css">

	<!--Google Font-->
	<link href="https://fonts.googleapis.com/css?family=Cairo" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="css/storymap.2.4.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">

	<link rel="shortcut icon" type="image/png" href="img/favicon.png"/>

	<!--add required libraries-->
	<!--leaflet-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js"></script>
	<!--leaflet.ajax for asynchronously adding geojson data-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet-ajax/2.1.0/leaflet.ajax.min.js"></script>

	<script src="https://api.tiles.mapbox.com/mapbox-gl-js/v0.35.1/mapbox-gl.js"></script>

	<script src="https://rawgit.com/mapbox/mapbox-gl-leaflet/master/leaflet-mapbox-gl.js"></script>
	<!--jquery-->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>

	<!--boostrap-->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
	<!--story map plugin-->
	<script src="js/storymap.2.4.js"></script>
	<script src="js/starfield.js"></script>

    <!--&lt;!&ndash;MiniGlobe&ndash;&gt;-->
	<!--<script src="//d3js.org/d3.v4.min.js"></script>-->
	<!--<script src="//d3js.org/topojson.v1.min.js"></script>-->
</head>
<body>

<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-dark storymap-navbar">
	<a class="navbar-brand" href="#">
		<!--convert the style value to a class and then add the class to the css file.-->
		<img src="assets/img/logo.png" class="d-inline-block align-top">
	</a>
	<!-- Collect the nav links, forms, and other content for toggling -->
	<div class="collapse navbar-collapse">
		<!--Create class ml-auto for the navbar items you want on the right.-->
		<ul class="navbar-nav ml-auto">
			<li class="nav-item dropdown">
				<a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown">Share To...</a>
				<div class="dropdown-menu">
					<!--use font awesome icons-->
					<a class="dropdown-item" href="#"> <i class="fab fa-facebook-square"></i> Facebook</a>
					<a class="dropdown-item" href="#"> <i class="fab fa-twitter-square"></i> Twitter</a>
					<a class="dropdown-item" href="#"> <i class="fa fa-link"></i> Short Url </a>
				</div>
			</li>

			<li class="nav-item"><a class="nav-link" href="#" id="autoplay">AutoPlay</a></li>
		</ul>
	</div>
</nav>
<!--this is the story map container where all of the scenes are. -->
<div id="storymap" class="container-fluid">
	<div class="row">
		<div class="col-sm-6 col-md-8 storymap-map"></div>
		<div class="col-sm-6 col-md-4 storymap-story">
			<section data-scene="scene1" data-background="assets/storyline/act1/landing/background.mp4">
				<div class="fullscreen text-center">
					<h1 class="display-4 d-flex justify-content-center">Changing the coneversation with the Pure Water
						Brew challenge to create mindset shift</h1>
					<small class="d-flex justify-content-center" style="color: rgba(255,255,255,0.95)">Clean Water
						Services Inc. | Hillsboro, Oregon
					</small>
				</div>
			</section>
			<!--Introduction-->
			<section data-scene="scene2">
				<div class="col-md-3 col-sm-3">
					<h6>Hillsboro, Oregon</h6>
                        <!--<div id="miniglobe" class="fullscreen">-->
                        <!--</div>-->
				</div>
			</section>
			<!--Creating Conversation-->
				<section data-scene="scene3" data-background="assets/storyline/act1/conversation/newspaper-smpl.png">
						<!--add newspaper graphic with highlighted positive and negative words"-->
					</section>
				</div>
			</section>
			<!--"Pure "-->
			<section data-scene="scene4" data-background="assets/storyline/act1/pure/cans-1.png">
				<div class="fullscreen text-center">

                    <!--<div class="d-flex justify-content-center row sm-middle">-->
                    <!--<i class="col-sm-5"><img src="assets/img/logo.png" /></i>-->
                   <!--</div>-->
				</div>
			</section>
			<!--Test (Research)-->
			<section data-scene="scene5" data-background="assets/storyline/act" >
			<div id="class=col-sm-6 col-md-4">
				<h2>Research High Water Purity</h2>
				<br>
				<p class="text-center"><b>Test Site on Tualatin River</b></p>
				<video controls width="500px" class="embedded-photo img-responsive">
					<source src="assets/storyline/act3/test/test.mp4" />
				</video>
			</br>
			</div>
			</section>
			<!--Filtration-->
			<section data-scene="scene6" data-background="assets/storyline/act2/filtration/background/filter-sftlt.jpg">
				<div class="fullscreen text-center">
					<!--<div class="d-flex justify-content-center row sm-middle">-->
						<!--<i class="col-sm-3.5"><img src="assets/storyline/act2/filtration/background/sustainability-icon.png"/> </i>-->
						<!--<i class="col-sm-5"><img src="assets/storyline/act2/filtration/background/hand-shake.png" /></i>-->
						<!--<i class="col-sm-3.5"><img src="assets/storyline/act2/filtration/background/filter.png"/></i>-->
					<!--</div>-->
				</div>
			</section>
			<!--Brewers Challenge-->
					<section data-scene="scene7" data-background="">
						<div class="fullscreen text-center">
							<h1 class="display-4 d-flex justify-content-left">Engaged Brewers</h1>
						</div>
					</section>
			<!--Art Experience-->
			<section data-scene="scene8" data-background="assets/storyline/act3/brewers/art-14-challenge.mp4">
				<div class="fullscreen text-center">
				</div>
			</section>

			<!--Sustainability challenge climax-->
			<section data-scene="scene9" data-background="assets/storyline/act2/breakthrough/water-treatment.png">
					<div id="class= col-sm-6 col-md-4">
						<h2>Sustainability Challenge</h2>
						<br>
						<p class="text-center"><b>""</b></p>
						<video controls width="500px" class="embedded-photo img-responsive">
							<source src="assets/storyline/act3/brewers/art-141-challeng.mp4" />
						</video>
						</br>
					</div>
					</section>

			<!--Breakthrough DEQ and EPA-->
			<section data-scene="scene10" data-background="assets/storyline/act2/breakthrough/water-treatment.png">
				<div>
					<img src="" class="">
				</div>
			</section>

			<!--Social Media analysis Twitter Map-->
			<section data-scene="scene11">
				<div class="col-md-3 col-sm-3">
				</div>
			</section>

			<!--Beer Happy-->
				<section data-scene="scene12" data-background="">
					<div class="fullscreen text-center">
					</div>
				</section>
				<!--Bill-->
				<section data-scene="scene13" data-background="assets/storyline/act2/bill/background-beer.mp4">
					<div class="fullscreen text-center">
						<h1 class="display-4 d-flex justify-content-left">The only thing remarkable about this is that it isn't remarkable at all.</h1>
					</div>
				</section>
				<!--Lotus-->
				<section data-scene="scene14" data-background="">
					<div class="fullscreen text-center">
					</div>
				</section>
			</section>
			<!--closing-->
			<section data-scene="scene15">
				<div class="col-md-3 col-sm-3">
				</div>
			</section>
		]
	</div>
</div>
</div>

<script>

	function test(key, map, section) {

		$("i.fa-map-marker").remove();
		$(section).find(".fullscreen").append('<i class="fa fa-map-marker fa-stack-4x text-primary">');

		//
		//
		<!--<span class="fa-stack fa-4x">-->
		// <!--<i class="fa fa-map-marker fa-stack-2x text-primary"></i>-->
		//         <!--</span>-->
		//
		console.log(this.name);
	}
    function intro(key, map, section) {

        L.marker([45.514685, -122.987080]).addTo(map).bindPopup("<a href='#'><img src='assets//storyline//act1//intro//cws-logo.png'></a>");
    }

	// function addWordUniverse() {
	// 	$("#worduniverse")
	// 		.empty()
	// 		.append('<canvas id="canvas2d"></canvas>');
	// 	new StarField('worduniverse').render(100, 3);
	// }
    function addMiniGlobe() {
        $("#miniglobe")
            .empty()
            .append('<canvas id="canvas2d"></canvas>');
        new MiniGlobe('miniglobe').render(100, 3);
    }


	var layers = {
		layer1: {
			layer: L.tileLayer('https://api.mapbox.com/styles/v1/ginnykatz/cjgopxarh00082rp0tx41ve40/tiles/256/{z}/{x}/{y}?access_token=pk.eyJ1IjoiZ2lubnlrYXR6IiwiYSI6ImNqZ2J2M2U0Nzl1NzEyd21kZHk4czVxdXgifQ.4KrWqM_F46SXCnyhyZj02A'),
			legend: '<i style="background: black; opacity: 0.5"></i><p><b>legend 1</b></p>'
		},
		layer2: {
			layer: L.geoJson.ajax('http://mapious.ceoas.oregonstate.edu/geoserver/mapious/ows?service=WFS&version=1.0.0&request=GetFeature&typeName=ore_counties&outputFormat=application%2Fjson', {
				color: 'orange',
				weight: 5
			}),
			legend: '<i style="background: orange; opacity: 0.5"></i><p><b>legend 2</b></p>'
		},
		layer3: {
			layer: L.tileLayer('http://cartodb-basemaps-{s}.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png')
		},
		layer4: {
			layer: L.mapboxGL({
					accessToken: 'pk.eyJ1IjoiZ2lubnlrYXR6IiwiYSI6ImNqZ2J2M2U0Nzl1NzEyd21kZHk4czVxdXgifQ.4KrWqM_F46SXCnyhyZj02A',
					style: 'mapbox://styles/mapbox/bright-v8'
				},
			)
		}
	};
	<!-- Hillsoboro lat: long : 45.514685, lng:  -122.987080 -->


    var scenes = {

		scene1: {lat: 44.0563432, lng: -123.5099875, zoom: 0, layers: [layers.layer2], name: "Landing Page"},
		scene2: {lat: 45.514685, lng: -122.987080, zoom: 7.5, layers: [layers.layer1], name: "Introduction", script:intro,<!-- script:addMiniGlobe-->},
        scene3: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer1, layers.layer2], name: "Conversation"},
		scene4: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Pure"},
		scene5: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer1], name: "Test"},
		scene6: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Filtration"},
        scene7: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Brewers"},
        scene8: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Art Experience"},
        scene9: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Sustainability"},
        scene10: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Breakthrough"},
        scene11: {lat: 44.5701158, lng: -123.2949388, zoom: 12,	layers: [layers.layer1, layers.layer2],	name: "Twitter Map"},
        scene12: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Beer"},
		scene13: {lat: 44.5701158, lng: -123.2949388, zoom: 12, layers: [layers.layer2], name: "Bill"},
		scene14: {lat: 44.5701158, lng: -123.2949388, zoom: 10, layers: [layers.layer2,], name: "Lotus"},
		scene15: {lat: 44.5701158, lng: -123.2949388, zoom: 10, layers: [layers.layer2,], name: "Closing"}
	}

	var sm = $('#storymap').storymap({
		scenes: scenes,
		layers: layers,
		// baselayer: layers.layer3,
		legend: false,
		navbar: true,
		loader: true,
		flyto: true,
		credits: "Build with <i class='material-icons' style='color: red; font-size: 10px;'>favorite</i> from OSU",
		scalebar: true,
		scrolldown: true,
		progressline: true,
		navwidget: true,
		mapinternaction: false,
		createMap: function () {
			var map = L.map($(".storymap-map")[0], {zoomControl: false}).setView([44, -120], 7);
			// basemap = this.baselayer.layer.addTo(map);
			return map;
		}
	});

	// $("#autoplay").on('click', $(this).autoplay())

    </script>
</body>
</html>

